<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Home</title>
  <link rel="stylesheet" href="/css/index.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" />
</head>

<body>
  <header class="d-flex justify-content-center align-items-center p-3 border-bottom">
    <h4 class="m-0">Hi, <%= user.name %>!</h4>
  </header>


  <div style="position: fixed; top: 20px; left: 20px; z-index: 999;">
    <a href="/profile" title="Create Your Profile">
      <img src="/svgs/profile.svg" alt="Create Your Profile" width="30" height="30">
    </a>
  </div>

  <!-- TOP-RIGHT ICONS (Fixed to screen corner) -->
  <div style="position: fixed; top: 20px; right: 20px; z-index: 999;">
    <a href="/friends" title="Add Friend" class="position-relative me-3">
      <img src="/svgs/add-friend.svg" alt="Add Friend" width="30" height="30">
      <% if (requestCount> 0) { %>
        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
          <%= requestCount %>
        </span>
        <% } %>
    </a>
  </div>

  <main class="container text-center mt-5">
    <p class="lead">Welcome to your LingoLink dashboard. Use the tabs below to get started.</p>
    <div class="card mx-auto mt-4" style="max-width: 400px;">
      <div class="card-body">
        <h5 class="card-title text-primary">Login Streak ðŸ”¥</h5>
        <div id="streakDisplay" class="text-center">
          <p class="fs-3 mb-1">
            <span id="streakCount"><%= user.streak || 0 %></span> Day<%= (user.streak || 0) === 1 ? '' : 's' %>
          </p>
          <p class="text-muted">
            <% if (user.streak > 1) { %>
              You're on a hot <%= user.streak %>-day streak! Keep it up!
            <% } else if (user.streak === 1) { %>
              Great start! Log in tomorrow to keep your streak going!
            <% } else { %>
              Log in tomorrow to start your streak!
            <% } %>
          </p>
        </div>
      </div>
    </div>
  </main>

  <!-- Persistent Nav Bar -->
  <%- include('templates/navbar', { activeTab: 'home' }) %>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <% if (showProfilePrompt) { %>
      <script>
        Swal.fire({
          title: "Create Your Profile",
          text: "Would you like to create your profile now?",
          icon: "info",
          showCancelButton: true,
          confirmButtonText: "Create Profile",
          cancelButtonText: "Later"
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "/profile";
          }
        });
      </script>
      <% } %>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const streakDisplay = document.getElementById('streakDisplay');
          streakDisplay.classList.add('animate__animated', 'animate__zoomIn');

          setTimeout(() => {
            streakDisplay.classList.remove('animate__animated', 'animate__zoomIn');
          }, 500);
        });
      </script>
</body>

</html>